<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" sizes="16x16"  href="media/img/favicon-16x16.png">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" href="css/common.css">
        <link rel="stylesheet" href="css/styles.css">

        <title>EBAF-01 :: Galería</title>
    </head>

    <body>
        <header class="bg-amarillo-600">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <a class="navbar-brand order-1 order-sm-1 m-0" href="#"><img src="media/img/ebaf_logo.png" class="logo-ebaf" alt="Logo EBAF" width="60" height="60" /></a>

                    <button class="navbar-toggler order-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div id="navbarText" class="collapse navbar-collapse order-3 order-sm-2 fs-5 text-center">
                        <ul class="navbar-nav justify-content-sm-center w-100">
                            <li class="nav-item mx-2"><a class="nav-link bordo-500" aria-current="page" href="index.html">Novedades</a></li>
                            <li class="nav-item mx-2"><a class="nav-link bordo-500" href="equipos.html">Equipos</a></li>
                            <li class="nav-item mx-2"><a class="nav-link bordo-500 active" href="galerias.html">Galería</a></li>
                        </ul>
                    </div>

                    <div class="navbar-text order-2 order-sm-3">
                        <div>E01 / +35</div>
                        <div>Sep. 2023</div>
                    </div>
                </div>
            </nav>
        </header>

        <main id="main">
            <section id="section">
                <div id="container" class="container">
                    <div id="row" class="row">
                        <div id="col-12" class="col-12">
                            <h1 class="text-center py-4 mt-4 mb-md-4">Galería de fotos</h1>

                            <div id="grid" class="d-grid grid-galeria mb-5">

                                <!-- ---------------------------------- -->
                                <!-- Acá van las imagenes de la galería -->
                                <!-- ---------------------------------- -->

                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="bg-amarillo-600 text-center p-2 fs-3">
            <a href="https://www.instagram.com/ebaf.basquet/" class="bordo-500 p-1" target="_blank"><i class="bi bi-instagram"></i></a>
            <a href="https://www.facebook.com/basquetfeme/" class="bordo-500 p-1" target="_blank"><i class="bi bi-facebook"></i></a>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                var ref = document.referrer;
                const searchParams = new URLSearchParams(window.location.search);
                let jornada = searchParams.has('jornada') ? searchParams.get('jornada') : '1';
                let gal = searchParams.has('gal') ? searchParams.get('gal') : 'resumen';

                getImgs(jornada, gal);

            });

            function getImgs(jornada, gal){
                let xhr = new XMLHttpRequest();
                let main = document.getElementById('main');
                let section = document.getElementById('section');
                let container = document.getElementById('container');
                let row = document.getElementById('row');
                let col12 = document.getElementById('col-12');
                let grid = document.getElementById('grid');

                let url = "media/img/jornada-"+jornada+"/"+gal;
                xhr.open("GET", url, true);
                xhr.responseType = 'document';
                xhr.onload = () => {
                    if (xhr.status === 200) {

                        var elements = xhr.response.getElementsByTagName("a");
                        for (x of elements) {
                            if ( x.href.match(/\.(jpe?g|png|gif)$/) ) {
                                let img = document.createElement("img");
                                img.src = x.href;
                                main.appendChild(section);
                                section.appendChild(container);
                                container.appendChild(row);
                                row.appendChild(col12);
                                col12.appendChild(grid);
                                grid.appendChild(img);
                                document.body.appendChild(main);
                            }
                        };
                    }
                    else {
                        //alert('Request failed. Returned status of ' + xhr.status);
                    }
                }
                xhr.send()

            }
        </script>
    </body>
</html>
